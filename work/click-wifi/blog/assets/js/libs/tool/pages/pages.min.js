"use strict";define(["avalon","css!./pages.min"],function(t){function r(t){if(t.total<2)return t.pages.clear();var r=[],s=t.curr<t.max/2?t.max-t.curr:Math.floor(t.max/2);t.curr-s>1&&r.push("...");for(var a=t.curr-s;a<t.curr+s+1&&a<=t.total;a++)a>0&&r.push(a);t.curr+s<t.total&&r.push("..."),t.pages=r}function s(t,r){1>t&&(t=r.jumpTxt=1),t>r.total&&(t=r.jumpTxt=r.total),r.curr!==t&&(r.curr=r.jumpTxt=t,r.callback&&r.callback(t))}return t.component("do:pages",{$replace:!0,$template:'<div class="do-ui-pages" ms-class="{{skin}}"><a class="rad-3" ms-if="curr > 1 && !simpleMode" ms-attr="{href: setUrl(1)}" ms-click="onJump($event, 1)">{{btns.home}}</a><a class="rad-3" ms-if="curr > 1" ms-attr="{href: setUrl(curr - 1)}" ms-click="onJump($event, curr - 1)">{{btns.prev}}</a><a class="rad-3" ms-if-loop="!simpleMode || curr === el" ms-repeat="pages" ms-attr="{href: setUrl(el)}" ms-class="{more: \'...\' === el, curr: curr === el}" ms-click="onJump($event, el)">{{el}}</a><a class="rad-3" ms-if="curr < total" ms-attr="{href: setUrl(curr + 1)}" ms-click="onJump($event, curr + 1)">{{btns.next}}</a><a class="rad-3" ms-if="curr < total && !simpleMode" ms-attr="{href: setUrl(total)}" ms-click="onJump($event, total)">{{btns.end}}</a><div class="page-jump" ms-if="pageJump && !simpleMode"><span>共{{total}}页，跳转到第</span><input type="text" ms-duplex="jumpTxt" ms-keyup="onJump($event)"><span>页</span><a class="rad-3" ms-attr="{href: setUrl(jumpTxt)}" ms-click="onJump($event, jumpTxt)">确定</a></div></div>',$init:function(t){t.skin||(t.skin="default"),t.skin="skin-"+t.skin.trim(),r(t),t.setUrl=function(r){return!t.url||"..."===r||t.curr===r||r>t.total||1>r?"javascript:;":t.url.replace("{id}",r)},t.onJump=function(r,a){if("..."!==a){var e=this.getAttribute("href")||this.getAttribute("xlink:href");if("javascript:;"!=e&&(location.hash=e),void 0!==a){var c=a>>0;s(c,t)}else{var c=t.jumpTxt>>0||1;t.jumpTxt=c,13==r.keyCode&&s(c,t)}}},t.$watch("curr",function(s,a){s=s>>0||1,a>>=0,s!==a&&r(t)}),t.$watch("total",function(s,a){s=s>>0||1,a>>=0,s!==a&&r(t)})},curr:1,total:1,max:5,url:"javascript:;",pageJump:!1,simpleMode:!1,jumpTxt:1,pages:[],skin:"default",btns:{prev:"<<",next:">>",home:"首页",end:"末页"},setUrl:t.noop,onJump:t.noop,callback:t.noop}),t});